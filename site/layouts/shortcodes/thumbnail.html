{{ $img := $.Page.Resources.GetMatch (.Get 0) }}
{{ if not $img }}
{{ $img = resources.Get "images/error.jpg" }}
{{ end }}
{{ $thumbnail := $img.Resize (.Get 3 | default "x200") }}
<figure>
    <a href="{{ ($img | fingerprint).Permalink }}">
        <img class="{{ (.Get 2 | default "right") }}" src="{{ ($thumbnail | fingerprint).Permalink }}" alt="{{ (.Get 1 | default "Error") }}" loading="lazy"/>
    </a>
    <figcaption>{{ (.Get 1 | default "Error") }}</figcaption>
</figure>